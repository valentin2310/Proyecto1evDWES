\doxysection{Sql\+Server\+Connection.\+php}
\hypertarget{_sql_server_connection_8php_source}{}\label{_sql_server_connection_8php_source}\index{vendor/laravel/framework/src/Illuminate/Database/SqlServerConnection.php@{vendor/laravel/framework/src/Illuminate/Database/SqlServerConnection.php}}
\mbox{\hyperlink{_sql_server_connection_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00003}00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_illuminate_1_1_database}{Illuminate\(\backslash\)Database}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00005}00005\ use\ Closure;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00006}00006\ use\ Exception;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00007}00007\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_p_d_o_1_1_sql_server_driver}{Illuminate\(\backslash\)Database\(\backslash\)PDO\(\backslash\)SqlServerDriver}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00008}00008\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_query_1_1_grammars_1_1_sql_server_grammar}{Illuminate\(\backslash\)Database\(\backslash\)Query\(\backslash\)Grammars\(\backslash\)SqlServerGrammar}}\ as\ QueryGrammar;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00009}00009\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_query_1_1_processors_1_1_sql_server_processor}{Illuminate\(\backslash\)Database\(\backslash\)Query\(\backslash\)Processors\(\backslash\)SqlServerProcessor}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00010}00010\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_schema_1_1_grammars_1_1_sql_server_grammar}{Illuminate\(\backslash\)Database\(\backslash\)Schema\(\backslash\)Grammars\(\backslash\)SqlServerGrammar}}\ as\ SchemaGrammar;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00011}00011\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_schema_1_1_sql_server_builder}{Illuminate\(\backslash\)Database\(\backslash\)Schema\(\backslash\)SqlServerBuilder}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00012}00012\ use\ \mbox{\hyperlink{class_illuminate_1_1_filesystem_1_1_filesystem}{Illuminate\(\backslash\)Filesystem\(\backslash\)Filesystem}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00013}00013\ use\ RuntimeException;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00014}00014\ use\ Throwable;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00016}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection}{00016}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_illuminate_1_1_database_1_1_p_d_o_1_1_sql_server_connection}{SqlServerConnection}}\ \textcolor{keyword}{extends}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection}{Connection}}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00027}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a96c1060e07466f4a3a162161c9a0a090}{00027}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a96c1060e07466f4a3a162161c9a0a090}{transaction}}(Closure\ \$callback,\ \$attempts\ =\ 1)}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00028}00028\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\$a\ =\ 1;\ \$a\ <=\ \$attempts;\ \$a++)\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_aa5addac34e519c0029d8c9279af02361}{getDriverName}}()\ ===\ \textcolor{stringliteral}{'sqlsrv'})\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parent::transaction(\$callback,\ \$attempts);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_a6e7560ad95a7986be67f7528c80e7f1a}{getPdo}}()-\/>exec(\textcolor{stringliteral}{'BEGIN\ TRAN'});}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We'll\ simply\ execute\ the\ given\ callback\ within\ a\ try\ /\ catch\ block}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ if\ we\ catch\ any\ exception\ we\ can\ rollback\ the\ transaction}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ that\ none\ of\ the\ changes\ are\ persisted\ to\ the\ database.}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$callback(\$this);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_a6e7560ad95a7986be67f7528c80e7f1a}{getPdo}}()-\/>exec(\textcolor{stringliteral}{'COMMIT\ TRAN'});}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ catch\ an\ exception,\ we\ will\ rollback\ so\ nothing\ gets\ messed}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ up\ in\ the\ database.\ Then\ we'll\ re-\/throw\ the\ exception\ so\ it\ can}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ be\ handled\ how\ the\ developer\ sees\ fit\ for\ their\ applications.}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Throwable\ \$e)\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_a6e7560ad95a7986be67f7528c80e7f1a}{getPdo}}()-\/>exec(\textcolor{stringliteral}{'ROLLBACK\ TRAN'});}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \$e;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00055}00055\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00056}00056\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00064}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a73280599f2ee5800d87a6e6bbbceec1c}{00064}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a73280599f2ee5800d87a6e6bbbceec1c}{escapeBinary}}(\$value)}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00065}00065\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00066}00066\ \ \ \ \ \ \ \ \ \$hex\ =\ bin2hex(\$value);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00068}00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}0x\{\$hex\}"{}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00069}00069\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00077}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a08cbb8ab5b04ce1f25af81c66f2cd416}{00077}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a08cbb8ab5b04ce1f25af81c66f2cd416}{isUniqueConstraintError}}(Exception\ \$exception)}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00078}00078\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ boolval(preg\_match(\textcolor{stringliteral}{'\#Cannot\ insert\ duplicate\ key\ row\ in\ object\#i'},\ \$exception-\/>getMessage()));}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00080}00080\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00087}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6b385542311bd04d0e596a275013a5e3}{00087}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6b385542311bd04d0e596a275013a5e3}{getDefaultQueryGrammar}}()}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00088}00088\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00089}00089\ \ \ \ \ \ \ \ \ (\$grammar\ =\ \textcolor{keyword}{new}\ QueryGrammar)-\/>setConnection(\$this);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_af6923a750e11e88879c5b925e0c82466}{withTablePrefix}}(\$grammar);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00092}00092\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00099}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a9928b40d4e9aed6a7a0de4e6c0a085e0}{00099}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a9928b40d4e9aed6a7a0de4e6c0a085e0}{getSchemaBuilder}}()}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00100}00100\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_null(\$this-\/>schemaGrammar))\ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_a109a19eda0a315bc8703554f17a3538c}{useDefaultSchemaGrammar}}();}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00103}00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00104}00104\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_schema_1_1_sql_server_builder}{SqlServerBuilder}}(\$this);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00106}00106\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00113}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a4151cbf154e3af1ea9fa6a9027eb8b26}{00113}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a4151cbf154e3af1ea9fa6a9027eb8b26}{getDefaultSchemaGrammar}}()}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00114}00114\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00115}00115\ \ \ \ \ \ \ \ \ (\$grammar\ =\ \textcolor{keyword}{new}\ SchemaGrammar)-\/>setConnection(\$this);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00117}00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_connection_af6923a750e11e88879c5b925e0c82466}{withTablePrefix}}(\$grammar);}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00118}00118\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00128}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6dd056c8c3e6662fbc200022a2fa1f03}{00128}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6dd056c8c3e6662fbc200022a2fa1f03}{getSchemaState}}(\mbox{\hyperlink{class_illuminate_1_1_filesystem_1_1_filesystem}{Filesystem}}\ \$files\ =\ \textcolor{keyword}{null},\ callable\ \$processFactory\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00129}00129\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00130}00130\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ RuntimeException(\textcolor{stringliteral}{'Schema\ dumping\ is\ not\ supported\ when\ using\ SQL\ Server.'});}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00131}00131\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00138}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6fa8522b0b3d00aadf86aa5a369d8ce9}{00138}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_a6fa8522b0b3d00aadf86aa5a369d8ce9}{getDefaultPostProcessor}}()}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00139}00139\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00140}00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_query_1_1_processors_1_1_sql_server_processor}{SqlServerProcessor}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00141}00141\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00148}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_ac8af8cef125aeed6d8379b5e3f5e8f0d}{00148}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_sql_server_connection_ac8af8cef125aeed6d8379b5e3f5e8f0d}{getDoctrineDriver}}()}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00149}00149\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_p_d_o_1_1_sql_server_driver}{SqlServerDriver}};}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00151}00151\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_sql_server_connection_8php_source_l00152}00152\ \}}

\end{DoxyCode}
