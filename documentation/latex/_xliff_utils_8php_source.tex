\doxysection{Xliff\+Utils.\+php}
\hypertarget{_xliff_utils_8php_source}{}\label{_xliff_utils_8php_source}\index{vendor/symfony/translation/Util/XliffUtils.php@{vendor/symfony/translation/Util/XliffUtils.php}}
\mbox{\hyperlink{_xliff_utils_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00003}00003\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00004}00004\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ the\ Symfony\ package.}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00005}00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00006}00006\ \textcolor{comment}{\ *\ (c)\ Fabien\ Potencier\ <fabien@symfony.com>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00007}00007\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00008}00008\ \textcolor{comment}{\ *\ For\ the\ full\ copyright\ and\ license\ information,\ please\ view\ the\ LICENSE}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00009}00009\ \textcolor{comment}{\ *\ file\ that\ was\ distributed\ with\ this\ source\ code.}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00010}00010\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00012}00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_symfony_1_1_component_1_1_translation_1_1_util}{Symfony\(\backslash\)Component\(\backslash\)Translation\(\backslash\)Util}};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00014}00014\ use\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_exception_1_1_invalid_argument_exception}{Symfony\(\backslash\)Component\(\backslash\)Translation\(\backslash\)Exception\(\backslash\)InvalidArgumentException}};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00015}00015\ use\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_exception_1_1_invalid_resource_exception}{Symfony\(\backslash\)Component\(\backslash\)Translation\(\backslash\)Exception\(\backslash\)InvalidResourceException}};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00023}\mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils}{00023}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils}{XliffUtils}}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00024}00024\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00032}00032\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getVersionNumber(\(\backslash\)DOMDocument\ \$dom):\ \textcolor{keywordtype}{string}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00033}00033\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$dom-\/>getElementsByTagName(\textcolor{stringliteral}{'xliff'})\ as\ \$xliff)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \$version\ =\ \$xliff-\/>attributes-\/>getNamedItem(\textcolor{stringliteral}{'version'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$version)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$version-\/>nodeValue;}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{traces_8html_8php_a3825c9b9060c2d6ef594385997cd60aa}{\$namespace}}\ =\ \$xliff-\/>attributes-\/>getNamedItem(\textcolor{stringliteral}{'xmlns'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{traces_8html_8php_a3825c9b9060c2d6ef594385997cd60aa}{\$namespace}})\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ !==\ substr\_compare(\textcolor{stringliteral}{'urn:oasis:names:tc:xliff:document:'},\ \mbox{\hyperlink{traces_8html_8php_a3825c9b9060c2d6ef594385997cd60aa}{\$namespace}}-\/>nodeValue,\ 0,\ 34))\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_exception_1_1_invalid_argument_exception}{InvalidArgumentException}}(sprintf(\textcolor{stringliteral}{'Not\ a\ valid\ XLIFF\ namespace\ "{}\%s"{}.'},\ \mbox{\hyperlink{traces_8html_8php_a3825c9b9060c2d6ef594385997cd60aa}{\$namespace}}));}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ substr(\mbox{\hyperlink{traces_8html_8php_a3825c9b9060c2d6ef594385997cd60aa}{\$namespace}},\ 34);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00049}00049\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00051}00051\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Falls\ back\ to\ v1.2}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{'1.2'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00053}00053\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00060}\mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils_a1eb45ce42dcde37d26e8f211911b7b50}{00060}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils_a1eb45ce42dcde37d26e8f211911b7b50}{validateSchema}}(\(\backslash\)DOMDocument\ \$dom):\ array}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00061}00061\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00062}00062\ \ \ \ \ \ \ \ \ \$xliffVersion\ =\ static::getVersionNumber(\$dom);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00063}00063\ \ \ \ \ \ \ \ \ \$internalErrors\ =\ libxml\_use\_internal\_errors(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$shouldEnable\ =\ self::shouldEnableEntityLoader())\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \$disableEntities\ =\ libxml\_disable\_entity\_loader(\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00066}00066\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \$isValid\ =\ @\$dom-\/>schemaValidateSource(self::getSchema(\$xliffVersion));}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$isValid)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self::getXmlErrors(\$internalErrors);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00072}00072\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$shouldEnable)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ libxml\_disable\_entity\_loader(\$disableEntities);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00076}00076\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00078}00078\ \ \ \ \ \ \ \ \ \$dom-\/>normalizeDocument();}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00080}00080\ \ \ \ \ \ \ \ \ libxml\_clear\_errors();}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00081}00081\ \ \ \ \ \ \ \ \ libxml\_use\_internal\_errors(\$internalErrors);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00084}00084\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00085}00085\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00086}00086\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ shouldEnableEntityLoader():\ bool}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00087}00087\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \$dom,\ \$schema;}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{null}\ ===\ \$dom)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \$dom\ =\ new\ \(\backslash\)DOMDocument();}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \$dom-\/>loadXML(\textcolor{stringliteral}{'<?xml\ version="{}1.0"{}?><test/>'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \$tmpfile\ =\ tempnam(sys\_get\_temp\_dir(),\ \textcolor{stringliteral}{'symfony'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ register\_shutdown\_function(\textcolor{keyword}{static}\ \textcolor{keyword}{function}\ ()\ use\ (\$tmpfile)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ @unlink(\$tmpfile);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \$schema\ =\ \textcolor{stringliteral}{'<?xml\ version="{}1.0"{}\ encoding="{}utf-\/8"{}?>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00098}00098\ \textcolor{stringliteral}{<xsd:schema\ xmlns:xsd="{}http://www.w3.org/2001/XMLSchema"{}>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00099}00099\ \textcolor{stringliteral}{\ \ <xsd:include\ schemaLocation="{}file:///'}.str\_replace(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'/'},\ \$tmpfile).\textcolor{stringliteral}{'"{}\ />}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00100}00100\ \textcolor{stringliteral}{</xsd:schema>'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ file\_put\_contents(\$tmpfile,\ \textcolor{stringliteral}{'<?xml\ version="{}1.0"{}\ encoding="{}utf-\/8"{}?>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00102}00102\ \textcolor{stringliteral}{<xsd:schema\ xmlns:xsd="{}http://www.w3.org/2001/XMLSchema"{}>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00103}00103\ \textcolor{stringliteral}{\ \ <xsd:element\ name="{}test"{}\ type="{}testType"{}\ />}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00104}00104\ \textcolor{stringliteral}{\ \ <xsd:complexType\ name="{}testType"{}/>}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00105}00105\ \textcolor{stringliteral}{</xsd:schema>'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00106}00106\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00108}00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !@\$dom-\/>schemaValidateSource(\$schema);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00109}00109\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00111}\mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils_ad24eaa40d4cea61f907144068a6cbe58}{00111}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_translation_1_1_util_1_1_xliff_utils_ad24eaa40d4cea61f907144068a6cbe58}{getErrorsAsString}}(array\ \$xmlErrors):\ string}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00112}00112\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00113}00113\ \ \ \ \ \ \ \ \ \$errorsAsString\ =\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$xmlErrors\ as\ \$error)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \$errorsAsString\ .=\ sprintf(\textcolor{stringliteral}{"{}[\%s\ \%s]\ \%s\ (in\ \%s\ -\/\ line\ \%d,\ column\ \%d)\(\backslash\)n"{}},}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)LIBXML\_ERR\_WARNING\ ===\ \$error[\textcolor{stringliteral}{'level'}]\ ?\ \textcolor{stringliteral}{'WARNING'}\ :\ \textcolor{stringliteral}{'ERROR'},}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$error[\textcolor{stringliteral}{'code'}],}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$error[\textcolor{stringliteral}{'message'}],}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$error[\textcolor{stringliteral}{'file'}],}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$error[\textcolor{stringliteral}{'line'}],}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$error[\textcolor{stringliteral}{'column'}]}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00124}00124\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$errorsAsString;}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00127}00127\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00129}00129\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getSchema(\textcolor{keywordtype}{string}\ \$xliffVersion):\ string}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00130}00130\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{stringliteral}{'1.2'}\ ===\ \$xliffVersion)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \$schemaSource\ =\ file\_get\_contents(\_\_DIR\_\_.\textcolor{stringliteral}{'/../Resources/schemas/xliff-\/core-\/1.2-\/transitional.xsd'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \$xmlUri\ =\ \textcolor{stringliteral}{'http://www.w3.org/2001/xml.xsd'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00134}00134\ \ \ \ \ \ \ \ \ \}\ elseif\ (\textcolor{stringliteral}{'2.0'}\ ===\ \$xliffVersion)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \$schemaSource\ =\ file\_get\_contents(\_\_DIR\_\_.\textcolor{stringliteral}{'/../Resources/schemas/xliff-\/core-\/2.0.xsd'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \$xmlUri\ =\ \textcolor{stringliteral}{'informativeCopiesOf3rdPartySchemas/w3c/xml.xsd'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00137}00137\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ InvalidArgumentException(sprintf(\textcolor{stringliteral}{'No\ support\ implemented\ for\ loading\ XLIFF\ version\ "{}\%s"{}.'},\ \$xliffVersion));}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00139}00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self::fixXmlLocation(\$schemaSource,\ \$xmlUri);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00142}00142\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00147}00147\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ fixXmlLocation(\textcolor{keywordtype}{string}\ \$schemaSource,\ \textcolor{keywordtype}{string}\ \$xmlUri):\ string}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00148}00148\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00149}00149\ \ \ \ \ \ \ \ \ \$newPath\ =\ str\_replace(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'/'},\ \_\_DIR\_\_).\textcolor{stringliteral}{'/../Resources/schemas/xml.xsd'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00150}00150\ \ \ \ \ \ \ \ \ \$parts\ =\ explode(\textcolor{charliteral}{'/'},\ \$newPath);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00151}00151\ \ \ \ \ \ \ \ \ \$locationstart\ =\ \textcolor{stringliteral}{'file:///'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00152}00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ ===\ stripos(\$newPath,\ \textcolor{stringliteral}{'phar://'}))\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \$tmpfile\ =\ tempnam(sys\_get\_temp\_dir(),\ \textcolor{stringliteral}{'symfony'});}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$tmpfile)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ copy(\$newPath,\ \$tmpfile);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$parts\ =\ explode(\textcolor{charliteral}{'/'},\ str\_replace(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'},\ \textcolor{charliteral}{'/'},\ \$tmpfile));}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ array\_shift(\$parts);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$locationstart\ =\ \textcolor{stringliteral}{'phar:///'};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00161}00161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00163}00163\ \ \ \ \ \ \ \ \ \$drive\ =\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}\ ===\ \(\backslash\)DIRECTORY\_SEPARATOR\ ?\ array\_shift(\$parts).\textcolor{charliteral}{'/'}\ :\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00164}00164\ \ \ \ \ \ \ \ \ \$newPath\ =\ \$locationstart.\$drive.implode(\textcolor{charliteral}{'/'},\ array\_map(\textcolor{stringliteral}{'rawurlencode'},\ \$parts));}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00166}00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ str\_replace(\$xmlUri,\ \$newPath,\ \$schemaSource);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00167}00167\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00172}00172\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getXmlErrors(\textcolor{keywordtype}{bool}\ \$internalErrors):\ array}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00173}00173\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00174}00174\ \ \ \ \ \ \ \ \ \$errors\ =\ [];}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (libxml\_get\_errors()\ as\ \$error)\ \{}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \$errors[]\ =\ [}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'level'}\ =>\ \(\backslash\)LIBXML\_ERR\_WARNING\ ==\ \$error-\/>level\ ?\ \textcolor{stringliteral}{'WARNING'}\ :\ \textcolor{stringliteral}{'ERROR'},}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'code'}\ =>\ \$error-\/>code,}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'message'}\ =>\ trim(\$error-\/>message),}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'file'}\ =>\ \$error-\/>file\ ?:\ \textcolor{stringliteral}{'n/a'},}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'line'}\ =>\ \$error-\/>line,}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'column'}\ =>\ \$error-\/>column,}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00184}00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00185}00185\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00186}00186\ \ \ \ \ \ \ \ \ libxml\_clear\_errors();}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00187}00187\ \ \ \ \ \ \ \ \ libxml\_use\_internal\_errors(\$internalErrors);}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$errors;}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00190}00190\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_xliff_utils_8php_source_l00191}00191\ \}}

\end{DoxyCode}
