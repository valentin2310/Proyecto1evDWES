\doxysection{Database.\+php}
\hypertarget{app_2_models_2_database_8php_source}{}\label{app_2_models_2_database_8php_source}\index{app/Models/Database.php@{app/Models/Database.php}}
\mbox{\hyperlink{app_2_models_2_database_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00008}\mbox{\hyperlink{namespace_app_1_1_models}{00008}}\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_app_1_1_models}{App\(\backslash\)Models}};}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00010}00010\ use\ mysqli;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00012}\mbox{\hyperlink{class_app_1_1_models_1_1_database}{00012}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_app_1_1_models_1_1_database}{Database}}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00013}00013\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00014}00014\ \ \ \ \ \textcolor{comment}{//\ Instancia\ del\ objeto\ Database}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00015}\mbox{\hyperlink{class_app_1_1_models_1_1_database_ac350be23da328a6f5429313efc9b96e4}{00015}}\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_ac350be23da328a6f5429313efc9b96e4}{\$\_instance}}\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00016}00016\ \ \ \ \ \textcolor{comment}{//\ Variable\ de\ la\ conexion\ con\ la\ bd\ mysqli}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00017}00017\ \ \ \ \ \textcolor{keyword}{private}\ \$link;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00018}00018\ \ \ \ \ \textcolor{comment}{//\ Resultado\ actual\ de\ la\ consulta\ en\ la\ bd}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00019}00019\ \ \ \ \ \textcolor{keyword}{private}\ \$result;\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00020}00020\ \ \ \ \ \textcolor{comment}{//\ Registro\ actual\ del\ resultado\ en\ la\ bd}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00021}00021\ \ \ \ \ \textcolor{keyword}{private}\ \$regActual;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00022}00022\ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00028}00028\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{function}\ \_\_construct()\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00029}00029\ \ \ \ \ \ \ \ \ \$db\_conf\ =\ include(app\_path(\textcolor{stringliteral}{'Config\(\backslash\)dbconfig.php'}));}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00030}00030\ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_app_1_1_models_1_1_database_a176e8d81fd5228bcfab6a8fdbb09588f}{conectar}}(\$db\_conf);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00031}00031\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00035}00035\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{function}\ \_\_clone()\ \{\}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00036}00036\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00042}\mbox{\hyperlink{class_app_1_1_models_1_1_database_ac93fbec81f07e5d15f80db907e63dc10}{00042}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_ac93fbec81f07e5d15f80db907e63dc10}{getInstance}}()\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00043}00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(self::\$\_instance\ instanceof\ \textcolor{keyword}{self}))\{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ self::\$\_instance=\textcolor{keyword}{new}\ \textcolor{keyword}{self}();}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00045}00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00046}00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_ac350be23da328a6f5429313efc9b96e4}{self::\$\_instance}};}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00047}00047\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00048}00048\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00053}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a176e8d81fd5228bcfab6a8fdbb09588f}{00053}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a176e8d81fd5228bcfab6a8fdbb09588f}{conectar}}(\$conf)\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!\ is\_array(\$conf))\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ exit();}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00056}00056\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00058}00058\ \ \ \ \ \ \ \ \ \$this-\/>link\ =\ \textcolor{keyword}{new}\ mysqli(\$conf[\textcolor{stringliteral}{'servidor'}],\ \$conf[\textcolor{stringliteral}{'usuario'}],\ \$conf[\textcolor{stringliteral}{'password'}]);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!\ \$this-\/>link)\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error\ de\ conexiÃ³n:\ \%s\(\backslash\)n"{}},\ mysqli\_connect\_error());}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ exit();}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00063}00063\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00065}00065\ \ \ \ \ \ \ \ \ \$this-\/>link-\/>select\_db(\$conf[\textcolor{stringliteral}{'base\_datos'}]);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00066}00066\ \ \ \ \ \ \ \ \ \$this-\/>link-\/>query(\textcolor{stringliteral}{"{}SET\ NAMES\ 'utf8'"{}});}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00067}00067\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00074}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a387aa10d9557ae0abf1b75021aa4a581}{00074}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a387aa10d9557ae0abf1b75021aa4a581}{consulta}}(\$sql)}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00075}00075\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00076}00076\ \ \ \ \ \ \ \ \ \$this-\/>result=\$this-\/>link-\/>query(\$sql);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>result;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00078}00078\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00087}\mbox{\hyperlink{class_app_1_1_models_1_1_database_afeca0125087b5321dd98fa71de60f980}{00087}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_afeca0125087b5321dd98fa71de60f980}{leeRegistro}}(\$result=NULL)}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00088}00088\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ \$result)}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00090}00090\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ \$this-\/>result)}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \$result=\$this-\/>result;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00096}00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00097}00097\ \ \ \ \ \ \ \ \ \$this-\/>regActual=\$result-\/>fetch\_assoc();}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>regActual;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00099}00099\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00104}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a69442d9386b206dfbaf028dc54b63018}{00104}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a69442d9386b206dfbaf028dc54b63018}{registroActual}}()}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00105}00105\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>regActual;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00107}00107\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00113}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a8f8ad53f696ccb73bc1b69c0228b8761}{00113}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a8f8ad53f696ccb73bc1b69c0228b8761}{lastID}}()}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00114}00114\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>link-\/>insert\_id;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00116}00116\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00125}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a6b6de52cc9a217302a4d7cfc576a54c9}{00125}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a6b6de52cc9a217302a4d7cfc576a54c9}{leeUnRegistro}}(\$tabla,\ \$condicion,\ \$campos=\textcolor{charliteral}{'*'})}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00126}00126\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00127}00127\ \ \ \ \ \ \ \ \ \$sql=\textcolor{stringliteral}{"{}select\ \$campos\ from\ \$tabla\ where\ \$condicion\ limit\ 1"{}};}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00128}00128\ \ \ \ \ \ \ \ \ \$rs=\$this-\/>link-\/>query(\$sql);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\$rs)}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00130}00130\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$rs-\/>fetch\_assoc();}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00132}00132\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00134}00134\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00136}00136\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00137}00137\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00143}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a29130dc9b5a971249f7cbf338961ef04}{00143}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a29130dc9b5a971249f7cbf338961ef04}{crearSentenciaPreparada}}(\$sql)\{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>link-\/>prepare(\$sql);}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00145}00145\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00150}\mbox{\hyperlink{class_app_1_1_models_1_1_database_a9d352603e5f0070e10043c82fa8704a2}{00150}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_app_1_1_models_1_1_database_a9d352603e5f0070e10043c82fa8704a2}{limpiarCampo}}(\mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}})\ \{}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00151}00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}}\ =\ trim(\mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}});}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00152}00152\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}}\ =\ stripslashes(\mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}});}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00153}00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}}\ =\ htmlspecialchars(\mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}});}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00154}00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{update__mime__types_8php_ab9807831e7f54cb17039eb0b280ef902}{\$data}};}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00155}00155\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{app_2_models_2_database_8php_source_l00157}00157\ \}}

\end{DoxyCode}
