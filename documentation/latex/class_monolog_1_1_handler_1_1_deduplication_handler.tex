\doxysection{Deduplication\+Handler Class Reference}
\hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler}{}\label{class_monolog_1_1_handler_1_1_deduplication_handler}\index{DeduplicationHandler@{DeduplicationHandler}}
Inheritance diagram for Deduplication\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.783784cm]{class_monolog_1_1_handler_1_1_deduplication_handler}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a502a22bf6ca8cd11800df8cca700765a}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}} \$handler, ?string \$deduplication\+Store=null, int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}Level \$deduplication\+Level=Level\+::\+Error, int \$time=60, bool \$bubble=true)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38}{flush}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler}{Buffer\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a341f6d8c664c885165c9308329324388}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}} \$handler, int \$buffer\+Limit=0, int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}Level \$level=Level\+::\+Debug, bool \$bubble=true, bool \$flush\+On\+Overflow=false)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_acb13379d9d704c21ec1e43b40700d064}{handle}} (\mbox{\hyperlink{class_monolog_1_1_log_record}{Log\+Record}} \$record)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a421831a265621325e1fdd19aace0c758}{\+\_\+\+\_\+destruct}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aa69c8bf1f1dcf4e72552efff1fe3e87e}{close}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aa821bec12eaa7e0f649397c9675ff505}{clear}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a4a20559544fdf4dcb457e258dc976cf8}{reset}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a87804f2347dd817752ef1faa1f0dea05}{set\+Formatter}} (\mbox{\hyperlink{interface_monolog_1_1_formatter_1_1_formatter_interface}{Formatter\+Interface}} \$formatter)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aad3a8e83c90770a1f71a75bb51e782d8}{get\+Formatter}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler}{Abstract\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a2e80ea49b87f155348b9f33daeb53cb8}{\+\_\+\+\_\+construct}} (int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}Level \$level=Level\+::\+Debug, bool \$bubble=true)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_af977dd4941954292c32aa728be8563e3}{is\+Handling}} (\mbox{\hyperlink{class_monolog_1_1_log_record}{Log\+Record}} \$record)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a0219986617b551bb68d0a9451c51f19a}{set\+Level}} (int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}Level \$level)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a23fac327059bf3fd0fe57555252d8cf2}{get\+Level}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_ac98541e5bd5ed488d21e6c806d551506}{set\+Bubble}} (bool \$bubble)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a013f02d7a1343068d758c412223c2a95}{get\+Bubble}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler}{Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler_a944865926b0302ad2d802bea1eec3a57}{handle\+Batch}} (array \$records)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler_aaf11785905da71774e052912d784e3b4}{\+\_\+\+\_\+sleep}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface}{Processable\+Handler\+Interface}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface_a14c91c0ddce4f5cb91bc031e68c00453}{push\+Processor}} (callable \$callback)
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface_aece5018a30e181b7c02b82a8470b5017}{pop\+Processor}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
string \mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a96f3b8cef4f53cf5997ea63f5d9f280b}{\$deduplication\+Store}}
\item 
Level \mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_ac41e7eef2583c005f0db0855c5b06cd2}{\$deduplication\+Level}}
\item 
int \mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_ac0acef12d42ba433be41d35c814c861c}{\$time}}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler}{Buffer\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}} \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a777775c0998edf213a1be91cc0305f20}{\$handler}}
\item 
int \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_afd7f748d724babfa282055910e7bc1f2}{\$buffer\+Size}} = 0
\item 
int \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a4fe0bc31a42960c4bda1c710cf80c48e}{\$buffer\+Limit}}
\item 
bool \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a45c9561bdb202a2892f24ed769ecc83d}{\$flush\+On\+Overflow}}
\item 
array \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a49df45f9bb4a43253f0ee61d1955fa0d}{\$buffer}} = \mbox{[}$\,$\mbox{]}
\item 
bool \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a40d0b9165bf5d242feb071459a189764}{\$initialized}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler}{Abstract\+Handler}}}
\begin{DoxyCompactItemize}
\item 
Level \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_aa36bf98e6175620b31e86fef2a7a86ff}{\$level}} = Level\+::\+Debug
\item 
bool \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_ac6f55e8d474d30b8cbfc3f43f5c32a42}{\$bubble}} = true
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Simple handler wrapper that deduplicates log records across multiple requests

It also includes the Buffer\+Handler functionality and will buffer all messages until the end of the request or flush() is called.

This works by storing all log records\textquotesingle{} messages above \$deduplication\+Level to the file specified by \$deduplication\+Store. When further logs come in at the end of the request (or when flush() is called), all those above \$deduplication\+Level are checked against the existing stored logs. If they match and the timestamps in the stored log is not older than \$time seconds, the new log record is discarded. If no log record is new, the whole data set is discarded.

This is mainly useful in combination with Mail handlers or things like Slack or Hip\+Chat handlers that send messages to people, to avoid spamming with the same message over and over in case of a major component failure like a database server being down which makes all requests fail in the same way.

\begin{DoxyAuthor}{Author}
Jordi Boggiano \href{mailto:j.boggiano@seld.be}{\texttt{ j.\+boggiano@seld.\+be}} 
\end{DoxyAuthor}


Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00039}{39}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a502a22bf6ca8cd11800df8cca700765a}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a502a22bf6ca8cd11800df8cca700765a} 
\index{DeduplicationHandler@{DeduplicationHandler}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily \+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}}}]{\$handler,  }\item[{?string}]{\$deduplication\+Store = {\ttfamily null},  }\item[{int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}Level}]{\$deduplication\+Level = {\ttfamily Level\+:\+:Error},  }\item[{int}]{\$time = {\ttfamily 60},  }\item[{bool}]{\$bubble = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyParams}[1]{Parameters}
Handler\+Interface & {\em \$handler} & Handler. \\
\hline
string | null & {\em \$deduplication\+Store} & The file/path where the deduplication log should be kept \\
\hline
 & {\em int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}\+Level\texorpdfstring{$\vert$}{|}\+Log\+Level\+::\texorpdfstring{$\ast$}{*}} & \$deduplication\+Level The minimum logging level for log records to be looked at for deduplication purposes \\
\hline
int & {\em \$time} & The period (in seconds) during which duplicate entries should be suppressed after a given log is sent through \\
\hline
bool & {\em \$bubble} & Whether the messages that are handled can bubble up the stack or not\\
\hline
\end{DoxyParams}
@phpstan-\/param value-\/of\texorpdfstring{$<$}{<}Level\+::\+VALUES\texorpdfstring{$>$}{>}\texorpdfstring{$\vert$}{|}value-\/of\texorpdfstring{$<$}{<}Level\+::\+NAMES\texorpdfstring{$>$}{>}\texorpdfstring{$\vert$}{|}\+Level\texorpdfstring{$\vert$}{|}\+Log\+Level\+::\texorpdfstring{$\ast$}{*} \$deduplication\+Level 

Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00058}{58}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38} 
\index{DeduplicationHandler@{DeduplicationHandler}!flush@{flush}}
\index{flush@{flush}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reimplemented from \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a7751f77b5263bcf940ece6e824a05b38}{Buffer\+Handler}}.



Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00067}{67}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.



\doxysubsection{Field Documentation}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_ac41e7eef2583c005f0db0855c5b06cd2}\label{class_monolog_1_1_handler_1_1_deduplication_handler_ac41e7eef2583c005f0db0855c5b06cd2} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$deduplicationLevel@{\$deduplicationLevel}}
\index{\$deduplicationLevel@{\$deduplicationLevel}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$deduplicationLevel}{\$deduplicationLevel}}
{\footnotesize\ttfamily Level \$deduplication\+Level\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00043}{43}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.

\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a96f3b8cef4f53cf5997ea63f5d9f280b}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a96f3b8cef4f53cf5997ea63f5d9f280b} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$deduplicationStore@{\$deduplicationStore}}
\index{\$deduplicationStore@{\$deduplicationStore}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$deduplicationStore}{\$deduplicationStore}}
{\footnotesize\ttfamily string \$deduplication\+Store\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00041}{41}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.

\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_ac0acef12d42ba433be41d35c814c861c}\label{class_monolog_1_1_handler_1_1_deduplication_handler_ac0acef12d42ba433be41d35c814c861c} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$time@{\$time}}
\index{\$time@{\$time}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$time}{\$time}}
{\footnotesize\ttfamily int \$time\hspace{0.3cm}{\ttfamily [protected]}}



Definition at line \mbox{\hyperlink{_deduplication_handler_8php_source_l00045}{45}} of file \mbox{\hyperlink{_deduplication_handler_8php_source}{Deduplication\+Handler.\+php}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
vendor/monolog/monolog/src/\+Monolog/\+Handler/\mbox{\hyperlink{_deduplication_handler_8php}{Deduplication\+Handler.\+php}}\end{DoxyCompactItemize}
