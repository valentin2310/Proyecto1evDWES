\doxysection{Throttle\+Requests.\+php}
\hypertarget{_throttle_requests_8php_source}{}\label{_throttle_requests_8php_source}\index{vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php@{vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php}}
\mbox{\hyperlink{_throttle_requests_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00003}00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_illuminate_1_1_routing_1_1_middleware}{Illuminate\(\backslash\)Routing\(\backslash\)Middleware}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00005}00005\ use\ Closure;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00006}00006\ use\ \mbox{\hyperlink{class_illuminate_1_1_cache_1_1_rate_limiter}{Illuminate\(\backslash\)Cache\(\backslash\)RateLimiter}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00007}00007\ use\ \mbox{\hyperlink{class_illuminate_1_1_cache_1_1_rate_limiting_1_1_unlimited}{Illuminate\(\backslash\)Cache\(\backslash\)RateLimiting\(\backslash\)Unlimited}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00008}00008\ use\ \mbox{\hyperlink{class_illuminate_1_1_http_1_1_exceptions_1_1_http_response_exception}{Illuminate\(\backslash\)Http\(\backslash\)Exceptions\(\backslash\)HttpResponseException}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00009}00009\ use\ \mbox{\hyperlink{class_illuminate_1_1_http_1_1_exceptions_1_1_throttle_requests_exception}{Illuminate\(\backslash\)Http\(\backslash\)Exceptions\(\backslash\)ThrottleRequestsException}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00010}00010\ use\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_arr}{Illuminate\(\backslash\)Support\(\backslash\)Arr}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00011}00011\ use\ Illuminate\(\backslash\)Support\(\backslash\)InteractsWithTime;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00012}00012\ use\ RuntimeException;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00013}00013\ use\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_http_foundation_1_1_response}{Symfony\(\backslash\)Component\(\backslash\)HttpFoundation\(\backslash\)Response}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00015}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests}{00015}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests}{ThrottleRequests}}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00016}00016\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00017}00017\ \ \ \ \ use\ InteractsWithTime;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00024}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{00024}}\ \ \ \ \ \textcolor{keyword}{protected}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00031}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a0155fc95a034f824376157d5485e1866}{00031}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a0155fc95a034f824376157d5485e1866}{\$shouldHashKeys}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00039}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_ad2853fb3baaa6a8e8be9fa9320d55233}{00039}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_ad2853fb3baaa6a8e8be9fa9320d55233}{\_\_construct}}(\mbox{\hyperlink{class_illuminate_1_1_cache_1_1_rate_limiter}{RateLimiter}}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00040}00040\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00041}00041\ \ \ \ \ \ \ \ \ \$this-\/>limiter\ =\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00042}00042\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00050}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_ad92fd0eb0c06392a0c72edb090116ab5}{00050}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \textcolor{keyword}{using}(\$name)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00051}00051\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ static::class.\textcolor{charliteral}{':'}.\$name;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00053}00053\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00065}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a10b3c84a2e8c4e7f4bece99680dd9799}{00065}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a10b3c84a2e8c4e7f4bece99680dd9799}{with}}(\$maxAttempts\ =\ 60,\ \$decayMinutes\ =\ 1,\ \$prefix\ =\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00066}00066\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ static::class.\textcolor{charliteral}{':'}.implode(\textcolor{charliteral}{','},\ func\_get\_args());}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00068}00068\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00082}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a15a230a987bfbc91b5805c66096c5334}{00082}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a15a230a987bfbc91b5805c66096c5334}{handle}}(\$request,\ Closure\ \$next,\ \$maxAttempts\ =\ 60,\ \$decayMinutes\ =\ 1,\ \$prefix\ =\ \textcolor{stringliteral}{''})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00083}00083\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_string(\$maxAttempts)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ func\_num\_args()\ ===\ 3}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !\ is\_null(\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}}\ =\ \$this-\/>limiter-\/>limiter(\$maxAttempts)))\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a15d31c8d7288a7a93458d5eed2f56d05}{handleRequestUsingNamedLimiter}}(\$request,\ \$next,\ \$maxAttempts,\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}});}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00088}00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_acc10a5d761b236c52babe2fe385e77e1}{handleRequest}}(}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \$request,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \$next,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ [}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{object})\ [}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'key'}\ =>\ \$prefix.\$this-\/>resolveRequestSignature(\$request),}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'maxAttempts'}\ =>\ \$this-\/>resolveMaxAttempts(\$request,\ \$maxAttempts),}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'decayMinutes'}\ =>\ \$decayMinutes,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'responseCallback'}\ =>\ \textcolor{keyword}{null},}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00101}00101\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00102}00102\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00115}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a15d31c8d7288a7a93458d5eed2f56d05}{00115}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a15d31c8d7288a7a93458d5eed2f56d05}{handleRequestUsingNamedLimiter}}(\$request,\ Closure\ \$next,\ \$limiterName,\ Closure\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00116}00116\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00117}00117\ \ \ \ \ \ \ \ \ \$limiterResponse\ =\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_abd2697ebde6cb6a4f4da215841eff521}{\$limiter}}(\$request);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$limiterResponse\ instanceof\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_http_foundation_1_1_response}{Response}})\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$limiterResponse;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00121}00121\ \ \ \ \ \ \ \ \ \}\ elseif\ (\$limiterResponse\ instanceof\ \mbox{\hyperlink{class_illuminate_1_1_cache_1_1_rate_limiting_1_1_unlimited}{Unlimited}})\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$next(\$request);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00123}00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00125}00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_acc10a5d761b236c52babe2fe385e77e1}{handleRequest}}(}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \$request,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \$next,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ collect(Arr::wrap(\$limiterResponse))-\/>map(\textcolor{keyword}{function}\ (\$limit)\ use\ (\$limiterName)\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{object})\ [}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'key'}\ =>\ self::\$shouldHashKeys\ ?\ md5(\$limiterName.\$limit-\/>key)\ :\ \$limiterName.\textcolor{charliteral}{':'}.\$limit-\/>key,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'maxAttempts'}\ =>\ \$limit-\/>maxAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'decayMinutes'}\ =>\ \$limit-\/>decayMinutes,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'responseCallback'}\ =>\ \$limit-\/>responseCallback,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \})-\/>all()}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00136}00136\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00137}00137\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00149}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_acc10a5d761b236c52babe2fe385e77e1}{00149}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_acc10a5d761b236c52babe2fe385e77e1}{handleRequest}}(\$request,\ Closure\ \$next,\ array\ \$limits)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00150}00150\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$limits\ as\ \$limit)\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>limiter-\/>tooManyAttempts(\$limit-\/>key,\ \$limit-\/>maxAttempts))\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aab360bde0bec5fa5e3d9df83627204eb}{buildException}}(\$request,\ \$limit-\/>key,\ \$limit-\/>maxAttempts,\ \$limit-\/>responseCallback);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>limiter-\/>hit(\$limit-\/>key,\ \$limit-\/>decayMinutes\ *\ 60);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00157}00157\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00159}00159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}\ =\ \$next(\$request);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00161}00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$limits\ as\ \$limit)\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}\ =\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aabaf5582cebb6595dd9ff1f74cd9e9c2}{addHeaders}}(}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}},}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$limit-\/>maxAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>calculateRemainingAttempts(\$limit-\/>key,\ \$limit-\/>maxAttempts)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00167}00167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00169}00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00170}00170\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00179}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_afdfb63525724546b9bb933fb78ecf96f}{00179}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_afdfb63525724546b9bb933fb78ecf96f}{resolveMaxAttempts}}(\$request,\ \$maxAttempts)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00180}00180\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00181}00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (str\_contains(\$maxAttempts,\ \textcolor{charliteral}{'|'}))\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \$maxAttempts\ =\ explode(\textcolor{charliteral}{'|'},\ \$maxAttempts,\ 2)[\$request-\/>user()\ ?\ 1\ :\ 0];}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00183}00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00184}00184\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00185}00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ is\_numeric(\$maxAttempts)\ \&\&\ \$request-\/>user())\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ \$maxAttempts\ =\ \$request-\/>user()-\/>\{\$maxAttempts\};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00187}00187\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})\ \$maxAttempts;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00190}00190\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00191}00191\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00200}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a9e1048bb6de12c470683c7c6a0a04ed6}{00200}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a9e1048bb6de12c470683c7c6a0a04ed6}{resolveRequestSignature}}(\$request)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00201}00201\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$user\ =\ \$request-\/>user())\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>formatIdentifier(\$user-\/>getAuthIdentifier());}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00204}00204\ \ \ \ \ \ \ \ \ \}\ elseif\ (\$route\ =\ \$request-\/>route())\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>formatIdentifier(\$route-\/>getDomain().\textcolor{charliteral}{'|'}.\$request-\/>ip());}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00206}00206\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00208}00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ RuntimeException(\textcolor{stringliteral}{'Unable\ to\ generate\ the\ request\ signature.\ Route\ unavailable.'});}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00209}00209\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00220}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aab360bde0bec5fa5e3d9df83627204eb}{00220}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aab360bde0bec5fa5e3d9df83627204eb}{buildException}}(\$request,\ \$key,\ \$maxAttempts,\ \$responseCallback\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00221}00221\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00222}00222\ \ \ \ \ \ \ \ \ \$retryAfter\ =\ \$this-\/>getTimeUntilNextRetry(\$key);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00224}00224\ \ \ \ \ \ \ \ \ \$headers\ =\ \$this-\/>getHeaders(}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \$maxAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>calculateRemainingAttempts(\$key,\ \$maxAttempts,\ \$retryAfter),}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \$retryAfter}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00228}00228\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00230}00230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is\_callable(\$responseCallback)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00231}00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_http_1_1_exceptions_1_1_http_response_exception}{HttpResponseException}}(\$responseCallback(\$request,\ \$headers))}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_http_1_1_exceptions_1_1_throttle_requests_exception}{ThrottleRequestsException}}(\textcolor{stringliteral}{'Too\ Many\ Attempts.'},\ \textcolor{keyword}{null},\ \$headers);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00233}00233\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00241}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a521cf3acb83696c61229d299011613b6}{00241}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a521cf3acb83696c61229d299011613b6}{getTimeUntilNextRetry}}(\$key)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00242}00242\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00243}00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>limiter-\/>availableIn(\$key);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00244}00244\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00255}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aabaf5582cebb6595dd9ff1f74cd9e9c2}{00255}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_aabaf5582cebb6595dd9ff1f74cd9e9c2}{addHeaders}}(\mbox{\hyperlink{class_symfony_1_1_component_1_1_http_foundation_1_1_response}{Response}}\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}},\ \$maxAttempts,\ \$remainingAttempts,\ \$retryAfter\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00256}00256\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00257}00257\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}-\/>headers-\/>add(}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>getHeaders(\$maxAttempts,\ \$remainingAttempts,\ \$retryAfter,\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00259}00259\ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00260}00260\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00261}00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}};}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00262}00262\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00273}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a87c8a2a080059292ccf4432d155e7893}{00273}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a87c8a2a080059292ccf4432d155e7893}{getHeaders}}(\$maxAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$remainingAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$retryAfter\ =\ \textcolor{keyword}{null},}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\mbox{\hyperlink{class_symfony_1_1_component_1_1_http_foundation_1_1_response}{Response}}\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00277}00277\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00278}00278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}\ \&\&}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ !\ is\_null(\mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}-\/>headers-\/>get(\textcolor{stringliteral}{'X-\/RateLimit-\/Remaining'}))\ \&\&}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{int})\ \mbox{\hyperlink{index_8php_af4b6fb1bbc77ccc05f10da3b16935b99}{\$response}}-\/>headers-\/>get(\textcolor{stringliteral}{'X-\/RateLimit-\/Remaining'})\ <=\ (\textcolor{keywordtype}{int})\ \$remainingAttempts)\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00281}00281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [];}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00282}00282\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00283}00283\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00284}00284\ \ \ \ \ \ \ \ \ \$headers\ =\ [}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00285}00285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'X-\/RateLimit-\/Limit'}\ =>\ \$maxAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00286}00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'X-\/RateLimit-\/Remaining'}\ =>\ \$remainingAttempts,}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00287}00287\ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00289}00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ is\_null(\$retryAfter))\ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00290}00290\ \ \ \ \ \ \ \ \ \ \ \ \ \$headers[\textcolor{stringliteral}{'Retry-\/After'}]\ =\ \$retryAfter;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00291}00291\ \ \ \ \ \ \ \ \ \ \ \ \ \$headers[\textcolor{stringliteral}{'X-\/RateLimit-\/Reset'}]\ =\ \$this-\/>availableAt(\$retryAfter);}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00292}00292\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00293}00293\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00294}00294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$headers;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00295}00295\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00305}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a22950b41e85d8eac18a231fc9849c03f}{00305}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_a22950b41e85d8eac18a231fc9849c03f}{calculateRemainingAttempts}}(\$key,\ \$maxAttempts,\ \$retryAfter\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00306}00306\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is\_null(\$retryAfter)\ ?\ \$this-\/>limiter-\/>retriesLeft(\$key,\ \$maxAttempts)\ :\ 0;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00308}00308\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00316}00316\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{function}\ formatIdentifier(\$value)}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00317}00317\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00318}00318\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self::\$shouldHashKeys\ ?\ sha1(\$value)\ :\ \$value;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00319}00319\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00320}00320\ }
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00327}\mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_ac031894611244ee40222ff41d75d5085}{00327}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_routing_1_1_middleware_1_1_throttle_requests_ac031894611244ee40222ff41d75d5085}{shouldHashKeys}}(\textcolor{keywordtype}{bool}\ \$shouldHashKeys\ =\ \textcolor{keyword}{true})}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00328}00328\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00329}00329\ \ \ \ \ \ \ \ \ self::\$shouldHashKeys\ =\ \$shouldHashKeys;}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00330}00330\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_throttle_requests_8php_source_l00331}00331\ \}}

\end{DoxyCode}
