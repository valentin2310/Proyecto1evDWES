\doxysection{Chained\+Batch.\+php}
\hypertarget{_chained_batch_8php_source}{}\label{_chained_batch_8php_source}\index{vendor/laravel/framework/src/Illuminate/Bus/ChainedBatch.php@{vendor/laravel/framework/src/Illuminate/Bus/ChainedBatch.php}}
\mbox{\hyperlink{_chained_batch_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00003}00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_illuminate_1_1_bus}{Illuminate\(\backslash\)Bus}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00005}00005\ use\ \mbox{\hyperlink{class_illuminate_1_1_container_1_1_container}{Illuminate\(\backslash\)Container\(\backslash\)Container}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00006}00006\ use\ \mbox{\hyperlink{interface_illuminate_1_1_contracts_1_1_bus_1_1_dispatcher}{Illuminate\(\backslash\)Contracts\(\backslash\)Bus\(\backslash\)Dispatcher}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00007}00007\ use\ \mbox{\hyperlink{interface_illuminate_1_1_contracts_1_1_queue_1_1_should_queue}{Illuminate\(\backslash\)Contracts\(\backslash\)Queue\(\backslash\)ShouldQueue}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00008}00008\ use\ Illuminate\(\backslash\)Foundation\(\backslash\)Bus\(\backslash\)Dispatchable;}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00009}00009\ use\ Illuminate\(\backslash\)Queue\(\backslash\)InteractsWithQueue;}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00010}00010\ use\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection}{Illuminate\(\backslash\)Support\(\backslash\)Collection}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00011}00011\ use\ Throwable;}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00013}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch}{00013}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch}{ChainedBatch}}\ \textcolor{keyword}{implements}\ \mbox{\hyperlink{interface_illuminate_1_1_contracts_1_1_queue_1_1_should_queue}{ShouldQueue}}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00014}00014\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00015}00015\ \ \ \ \ use\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_a71d262186cb9ad7ece908f654b0431e3}{Batchable}},\ Dispatchable,\ InteractsWithQueue,\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_abef7904aefd7814d6b0b42d352c2c037}{Queueable}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00022}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_ab7f5ff0ad0fab66db15073d5a2a2f14b}{00022}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection}{Collection}}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_ab7f5ff0ad0fab66db15073d5a2a2f14b}{\$jobs}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00029}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a58551b63ba97fb35b928f11f36b1fac6}{00029}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a58551b63ba97fb35b928f11f36b1fac6}{\$name}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00036}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_aa75bf2044136a12fd7d99d6e468a1584}{00036}}\ \ \ \ \ \textcolor{keyword}{public}\ array\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_aa75bf2044136a12fd7d99d6e468a1584}{\$options}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00044}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a9830c63ec5cf1a18df59d67f4f81cac7}{00044}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a9830c63ec5cf1a18df59d67f4f81cac7}{\_\_construct}}(\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch}{PendingBatch}}\ \$batch)}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00045}00045\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00046}00046\ \ \ \ \ \ \ \ \ \$this-\/>jobs\ =\ static::prepareNestedBatches(\$batch-\/>jobs);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00048}00048\ \ \ \ \ \ \ \ \ \$this-\/>name\ =\ \$batch-\/>\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch_aacc7ea0fada1defae97e37d617865d39}{name}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00049}00049\ \ \ \ \ \ \ \ \ \$this-\/>options\ =\ \$batch-\/>options;}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00050}00050\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00058}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a88c142f77ed022d11b7845b1cf73344b}{00058}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a88c142f77ed022d11b7845b1cf73344b}{prepareNestedBatches}}(\mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection}{Collection}}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_ab7f5ff0ad0fab66db15073d5a2a2f14b}{\$jobs}}):\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection}{Collection}}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00059}00059\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_ab7f5ff0ad0fab66db15073d5a2a2f14b}{\$jobs}}-\/>\mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection_ade08fa61bdaee2ece583f318bc44c314}{map}}(fn\ (\$job)\ =>\ match\ (\textcolor{keyword}{true})\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ is\_array(\$job)\ =>\ static::prepareNestedBatches(collect(\$job))-\/>all(),}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \$job\ instanceof\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_collection}{Collection}}\ =>\ static::prepareNestedBatches(\$job),}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \$job\ instanceof\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch}{PendingBatch}}\ =>\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch}{ChainedBatch}}(\$job),}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}\ =>\ \$job,}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00065}00065\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00066}00066\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00073}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a66eb7514ea7f7f8a5738a180b14e9b48}{00073}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a66eb7514ea7f7f8a5738a180b14e9b48}{handle}}()}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00074}00074\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00075}00075\ \ \ \ \ \ \ \ \ \$batch\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch}{PendingBatch}}(Container::getInstance(),\ \$this-\/>jobs);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00077}00077\ \ \ \ \ \ \ \ \ \$batch-\/>name\ =\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a58551b63ba97fb35b928f11f36b1fac6}{\$this-\/>name}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00078}00078\ \ \ \ \ \ \ \ \ \$batch-\/>options\ =\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_aa75bf2044136a12fd7d99d6e468a1584}{\$this-\/>options}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>queue)\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \$batch-\/>onQueue(\$this-\/>queue);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00082}00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>connection)\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \$batch-\/>onConnection(\$this-\/>connection);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00086}00086\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00088}00088\ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a5705938e5c0d193920813e294dbfa551}{dispatchRemainderOfChainAfterBatch}}(\$batch);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$this-\/>chainCatchCallbacks\ ??\ []\ as\ \$callback)\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \$batch-\/>catch(\textcolor{keyword}{function}\ (\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_batch}{Batch}}\ \$batch,\ ?Throwable\ \$exception)\ use\ (\$callback)\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ \$batch-\/>\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_batch_a8f80fe79e765bc800d6ccf67aa257b8c}{allowsFailures}}())\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$callback(\$exception);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00096}00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00098}00098\ \ \ \ \ \ \ \ \ \$batch-\/>dispatch();}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00099}00099\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00107}\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a5705938e5c0d193920813e294dbfa551}{00107}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_bus_1_1_chained_batch_a5705938e5c0d193920813e294dbfa551}{dispatchRemainderOfChainAfterBatch}}(\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch}{PendingBatch}}\ \$batch)}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00108}00108\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ empty(\$this-\/>chained))\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \$next\ =\ unserialize(array\_shift(\$this-\/>chained));}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>chained\ =\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_a26de7e3dae46df25aaa4326894412385}{\$this-\/>chained}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>onConnection(\$next-\/>connection\ ?:\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_acd7c5e1f062f7e9d8dde05debfd2a75d}{\$this-\/>chainConnection}});}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>onQueue(\$next-\/>queue\ ?:\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_a1e78422c62f0edc5fe8d93e1942ba47a}{\$this-\/>chainQueue}});}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>chainConnection\ =\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_acd7c5e1f062f7e9d8dde05debfd2a75d}{\$this-\/>chainConnection}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>chainQueue\ =\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_a1e78422c62f0edc5fe8d93e1942ba47a}{\$this-\/>chainQueue}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \$next-\/>chainCatchCallbacks\ =\ \mbox{\hyperlink{namespace_illuminate_1_1_bus_adf7cacd788a5e4fe0ed92d957884f5ce}{\$this-\/>chainCatchCallbacks}};}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00121}00121\ \ \ \ \ \ \ \ \ \ \ \ \ \$batch-\/>\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_pending_batch_a6f7ef6a0dd72abf21dd48a684c5bb01a}{finally}}(\textcolor{keyword}{function}\ (\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_batch}{Batch}}\ \$batch)\ use\ (\$next)\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ \$batch-\/>\mbox{\hyperlink{class_illuminate_1_1_bus_1_1_batch_a52f29ef5a2b544ad20b9a0f1a4bb7589}{cancelled}}())\ \{}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00123}00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Container::getInstance()-\/>make(Dispatcher::class)-\/>dispatch(\$next);}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>chained\ =\ [];}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00128}00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00129}00129\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_chained_batch_8php_source_l00130}00130\ \}}

\end{DoxyCode}
