\doxysection{Monitor\+Command.\+php}
\hypertarget{_database_2_console_2_monitor_command_8php_source}{}\label{_database_2_console_2_monitor_command_8php_source}\index{vendor/laravel/framework/src/Illuminate/Database/Console/MonitorCommand.php@{vendor/laravel/framework/src/Illuminate/Database/Console/MonitorCommand.php}}
\mbox{\hyperlink{_database_2_console_2_monitor_command_8php}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00003}00003\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_illuminate_1_1_database_1_1_console}{Illuminate\(\backslash\)Database\(\backslash\)Console}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00005}00005\ use\ \mbox{\hyperlink{interface_illuminate_1_1_contracts_1_1_events_1_1_dispatcher}{Illuminate\(\backslash\)Contracts\(\backslash\)Events\(\backslash\)Dispatcher}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00006}00006\ use\ \mbox{\hyperlink{interface_illuminate_1_1_database_1_1_connection_resolver_interface}{Illuminate\(\backslash\)Database\(\backslash\)ConnectionResolverInterface}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00007}00007\ use\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_events_1_1_database_busy}{Illuminate\(\backslash\)Database\(\backslash\)Events\(\backslash\)DatabaseBusy}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00008}00008\ use\ \mbox{\hyperlink{class_illuminate_1_1_support_1_1_composer}{Illuminate\(\backslash\)Support\(\backslash\)Composer}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00009}00009\ use\ \mbox{\hyperlink{class_symfony_1_1_component_1_1_console_1_1_attribute_1_1_as_command}{Symfony\(\backslash\)Component\(\backslash\)Console\(\backslash\)Attribute\(\backslash\)AsCommand}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00011}00011\ \textcolor{preprocessor}{\#[AsCommand(name:\ 'db:monitor')]}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00012}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command}{00012}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command}{MonitorCommand}}\ \textcolor{keyword}{extends}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_database_inspection_command}{DatabaseInspectionCommand}}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00013}00013\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00019}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a8f34ca1e46a621ab10a3a40addb794f5}{00019}}\ \ \ \ \ \textcolor{keyword}{protected}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a8f34ca1e46a621ab10a3a40addb794f5}{\$signature}}\ =\ \textcolor{stringliteral}{'db:monitor}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00020}00020\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{-\/-\/databases=\ :\ The\ database\ connections\ to\ monitor\}}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00021}00021\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{-\/-\/max=\ :\ The\ maximum\ number\ of\ connections\ that\ can\ be\ open\ before\ an\ event\ is\ dispatched\}'};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00028}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a87b032cba06009e3467abf1c8018d960}{00028}}\ \ \ \ \ \textcolor{keyword}{protected}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a87b032cba06009e3467abf1c8018d960}{\$description}}\ =\ \textcolor{stringliteral}{'Monitor\ the\ number\ of\ connections\ on\ the\ specified\ database'};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00035}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a0d9c79b9b86b3f5891c6d3892f12c6a0}{00035}}\ \ \ \ \ \textcolor{keyword}{protected}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a0d9c79b9b86b3f5891c6d3892f12c6a0}{\$connection}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00042}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a1bcec9bbd34255927faaf155bf3a940a}{00042}}\ \ \ \ \ \textcolor{keyword}{protected}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a1bcec9bbd34255927faaf155bf3a940a}{\$events}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00051}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a05cd6e2948966bca8efb65ae401eeb9b}{00051}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a05cd6e2948966bca8efb65ae401eeb9b}{\_\_construct}}(\mbox{\hyperlink{interface_illuminate_1_1_database_1_1_connection_resolver_interface}{ConnectionResolverInterface}}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a0d9c79b9b86b3f5891c6d3892f12c6a0}{\$connection}},\ \mbox{\hyperlink{interface_illuminate_1_1_contracts_1_1_events_1_1_dispatcher}{Dispatcher}}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a1bcec9bbd34255927faaf155bf3a940a}{\$events}},\ \mbox{\hyperlink{namespace_composer}{Composer}}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_database_inspection_command_a9ac3c597e958aad60b45b053b0d80ba1}{\$composer}})}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00052}00052\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00053}00053\ \ \ \ \ \ \ \ \ parent::\_\_construct(\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_database_inspection_command_a9ac3c597e958aad60b45b053b0d80ba1}{\$composer}});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00055}00055\ \ \ \ \ \ \ \ \ \$this-\/>connection\ =\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a0d9c79b9b86b3f5891c6d3892f12c6a0}{\$connection}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00056}00056\ \ \ \ \ \ \ \ \ \$this-\/>events\ =\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a1bcec9bbd34255927faaf155bf3a940a}{\$events}};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00057}00057\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00064}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a66eb7514ea7f7f8a5738a180b14e9b48}{00064}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a66eb7514ea7f7f8a5738a180b14e9b48}{handle}}()}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00065}00065\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00066}00066\ \ \ \ \ \ \ \ \ \$databases\ =\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a604879ba67239f8045c4143aa68c8eeb}{parseDatabases}}(\$this-\/>option(\textcolor{stringliteral}{'databases'}));}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00068}00068\ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a9ea315a299bb748d412731bcb62cb1ea}{displayConnections}}(\$databases);}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$this-\/>option(\textcolor{stringliteral}{'max'}))\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00071}00071\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a18d184fcdc6620f672e81c651a709a86}{dispatchEvents}}(\$databases);}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00072}00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00073}00073\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00081}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a604879ba67239f8045c4143aa68c8eeb}{00081}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a604879ba67239f8045c4143aa68c8eeb}{parseDatabases}}(\$databases)}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00082}00082\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ collect(explode(\textcolor{charliteral}{','},\ \$databases))-\/>map(\textcolor{keyword}{function}\ (\$database)\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\ \$database)\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$database\ =\ \$this-\/>laravel[\textcolor{stringliteral}{'config'}][\textcolor{stringliteral}{'database.default'}];}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \$maxConnections\ =\ \$this-\/>option(\textcolor{stringliteral}{'max'});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ [}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'database'}\ =>\ \$database,}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'connections'}\ =>\ \$connections\ =\ \$this-\/>\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_database_inspection_command_a2c3dbb5b0693ecaf4b441446e614cd11}{getConnectionCount}}(\$this-\/>connection-\/>connection(\$database)),}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'status'}\ =>\ \$maxConnections\ \&\&\ \$connections\ >=\ \$maxConnections\ ?\ \textcolor{stringliteral}{'<fg=yellow;options=bold>ALERT</>'}\ :\ \textcolor{stringliteral}{'<fg=green;options=bold>OK</>'},}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ ];}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00095}00095\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00096}00096\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00104}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a9ea315a299bb748d412731bcb62cb1ea}{00104}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a9ea315a299bb748d412731bcb62cb1ea}{displayConnections}}(\$databases)}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00105}00105\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00106}00106\ \ \ \ \ \ \ \ \ \$this-\/>newLine();}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00108}00108\ \ \ \ \ \ \ \ \ \$this-\/>components-\/>twoColumnDetail(\textcolor{stringliteral}{'<fg=gray>Database\ name</>'},\ \textcolor{stringliteral}{'<fg=gray>Connections</>'});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00110}00110\ \ \ \ \ \ \ \ \ \$databases-\/>each(\textcolor{keyword}{function}\ (\$database)\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \$status\ =\ \textcolor{charliteral}{'['}.\$database[\textcolor{stringliteral}{'connections'}].\textcolor{stringliteral}{']\ '}.\$database[\textcolor{stringliteral}{'status'}];}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>components-\/>twoColumnDetail(\$database[\textcolor{stringliteral}{'database'}],\ \$status);}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00114}00114\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00116}00116\ \ \ \ \ \ \ \ \ \$this-\/>newLine();}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00117}00117\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00125}\mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a18d184fcdc6620f672e81c651a709a86}{00125}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_console_1_1_monitor_command_a18d184fcdc6620f672e81c651a709a86}{dispatchEvents}}(\$databases)}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00126}00126\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00127}00127\ \ \ \ \ \ \ \ \ \$databases-\/>each(\textcolor{keyword}{function}\ (\$database)\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$database[\textcolor{stringliteral}{'status'}]\ ===\ \textcolor{stringliteral}{'<fg=green;options=bold>OK</>'})\ \{}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>events-\/>dispatch(}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_illuminate_1_1_database_1_1_events_1_1_database_busy}{DatabaseBusy}}(}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$database[\textcolor{stringliteral}{'database'}],}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$database[\textcolor{stringliteral}{'connections'}]}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00138}00138\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00139}00139\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_database_2_console_2_monitor_command_8php_source_l00140}00140\ \}}

\end{DoxyCode}
